<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Tableau de Bord - Predikta</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Mobile Header -->
    <div class="mobile-header">
        <div class="mobile-logo">
            <i class="fas fa-chart-line"></i>
            Predikta
        </div>
        <div class="mobile-actions">
            <button class="icon-btn" onclick="openDepositModal()">
                <i class="fas fa-plus-circle"></i>
            </button>
            <button class="icon-btn" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" onclick="closeSidebar()"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <i class="fas fa-chart-line"></i>
                Predikta
            </div>
            <button class="sidebar-close" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="user-info">
            <div class="user-avatar" id="userAvatar">U</div>
            <div class="user-name" id="userName">Utilisateur</div>
            <div class="user-pseudo" id="userPseudo">@pseudo</div>
            <div class="balance-card">
                <div class="balance-label">Solde disponible</div>
                <div class="balance-value" id="userBalance">0 FCFA</div>
            </div>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Menu</div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('events'); closeSidebar();">
                        <i class="fas fa-calendar-alt"></i>
                        Événements
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('my-bets'); closeSidebar();">
                        <i class="fas fa-ticket-alt"></i>
                        Mes Paris
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('history'); closeSidebar();">
                        <i class="fas fa-history"></i>
                        Historique
                    </a>
                </li>
            </ul>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Finance</div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link" onclick="openDepositModal(); closeSidebar();">
                        <i class="fas fa-plus-circle"></i>
                        Déposer
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('transactions'); closeSidebar();">
                        <i class="fas fa-exchange-alt"></i>
                        Transactions
                    </a>
                </li>
            </ul>
        </div>

        <button class="btn-logout" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            Déconnexion
        </button>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Tableau de <span>bord</span></h1>
            <p class="page-subtitle">Bienvenue sur Predikta</p>
            <div class="header-actions">
                <button class="btn btn-primary btn-full" onclick="openDepositModal()">
                    <i class="fas fa-plus"></i>
                    Déposer des fonds
                </button>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon purple">
                    <i class="fas fa-wallet"></i>
                </div>
                <div class="stat-value" id="statBalance">0 FCFA</div>
                <div class="stat-label">Solde total</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon green">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="stat-value" id="statWins">0</div>
                <div class="stat-label">Paris gagnés</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orange">
                    <i class="fas fa-ticket-alt"></i>
                </div>
                <div class="stat-value" id="statBets">0</div>
                <div class="stat-label">Paris en cours</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon blue">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-value" id="statTotal">0 FCFA</div>
                <div class="stat-label">Total parié</div>
            </div>
        </div>

        <!-- Carousel -->
        <div class="carousel-section">
            <div class="carousel-header">
                <div class="carousel-title">
                    <i class="fas fa-fire"></i>
                    Événements populaires
                </div>
            </div>
            <div class="carousel-container">
                <div class="carousel-track" id="carouselTrack">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Events Section -->
        <div class="section">
            <div class="section-header">
                <h3 class="section-title">
                    <i class="fas fa-fire"></i>
                    Événements actifs
                </h3>
            </div>
            <div id="eventsList">
                <div class="empty-state">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Chargement...</p>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <div class="section">
            <div class="section-header">
                <h3 class="section-title">
                    <i class="fas fa-history"></i>
                    Historique récent
                </h3>
            </div>
            <div class="history-list" id="historyList">
                <div class="empty-state">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Chargement...</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Deposit Modal -->
    <div class="modal-overlay" id="depositModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Effectuer un dépôt</h3>
                <button class="modal-close" onclick="closeDepositModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="info-box">
                    <div class="info-item">
                        <i class="fas fa-info-circle"></i>
                        <span>Minimum : <strong>500 FCFA</strong></span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-clock"></i>
                        <span>Validation : <strong>5-15 min</strong></span>
                    </div>
                </div>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-text">Cliquez sur le bouton ci-dessous pour payer via Wave</div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-text">Effectuez votre transfert et gardez la capture</div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-text">Remplissez le formulaire de confirmation</div>
                    </div>
                </div>

                <a href="https://pay.wave.com/m/M_ci_iqMcg8KwRE-W/c/ci/" target="_blank" class="btn btn-primary btn-full mb-1">
                    <i class="fas fa-external-link-alt"></i>
                    Payer avec Wave
                </a>

                <div class="divider">
                    <span>Après le paiement</span>
                </div>

                <form id="depositForm" onsubmit="submitDeposit(event)">
                    <div class="form-group">
                        <label>Montant déposé (FCFA) *</label>
                        <input type="number" id="depositAmount" min="500" step="100" required placeholder="Ex: 5000">
                    </div>

                    <div class="form-group">
                        <label>Capture d'écran *</label>
                        <input type="file" id="depositScreenshot" accept="image/*" required>
                    </div>

                    <div class="form-group">
                        <label>Numéro Wave utilisé *</label>
                        <input type="tel" id="depositPhone" required placeholder="+225 XX XX XX XX XX">
                    </div>

                    <div class="form-group">
                        <label>Commentaire (optionnel)</label>
                        <input type="text" id="depositComment" placeholder="Informations supplémentaires">
                    </div>

                    <button type="submit" class="btn btn-success btn-full" id="submitDepositBtn">
                        <i class="fas fa-check-circle"></i>
                        Envoyer la confirmation
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Bet Modal -->
    <div class="modal-overlay" id="betModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Placer un pari</h3>
                <button class="modal-close" onclick="closeBetModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="bet-amount-display">
                    <div class="bet-amount-label">Montant du pari</div>
                    <div class="bet-amount-value" id="betAmountDisplay">100 FCFA</div>
                </div>

                <input type="range" class="bet-slider" id="betSlider" min="100" max="10000" step="100" value="100" oninput="updateBetAmount(this.value)">

                <div class="bet-quick-amounts">
                    <button class="bet-quick-amount" onclick="setBetAmount(100)">100</button>
                    <button class="bet-quick-amount" onclick="setBetAmount(500)">500</button>
                    <button class="bet-quick-amount" onclick="setBetAmount(1000)">1K</button>
                    <button class="bet-quick-amount" onclick="setBetAmount(5000)">5K</button>
                </div>

                <div class="bet-potential-win">
                    <div class="bet-potential-win-label">Gain potentiel estimé</div>
                    <div class="bet-potential-win-value" id="potentialWin">+0 FCFA</div>
                </div>

                <div class="form-group">
                    <label>Votre prédiction</label>
                    <div class="prediction-buttons">
                        <button class="prediction-btn yes" id="btnYes" onclick="setPrediction('yes')">
                            <i class="fas fa-check"></i> OUI
                        </button>
                        <button class="prediction-btn no" id="btnNo" onclick="setPrediction('no')">
                            <i class="fas fa-times"></i> NON
                        </button>
                    </div>
                </div>

                <button class="btn btn-primary btn-full" onclick="placeBet()" id="placeBetBtn">
                    <i class="fas fa-check-circle"></i>
                    Confirmer le pari
                </button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Message</span>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>
